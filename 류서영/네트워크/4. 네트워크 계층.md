## 4. 네트워크 계층

### Router

- forwarding: 들어온 패킷의 목적지 주소와 포워딩 테이블의 엔트리를 매칭시켜서 그 엔트리에 해당하는 링크로 전달
- routing: 포워딩 테이블을 만들어주는 역할을 담당

라우터는 오직 들어온 패킷을 라우팅 알고리즘에 따라 다음 라우터로 전달하는 역할만을 담당

### IP Datagram Format

- ver: IP 프로토콜의 버전, 현재는 IPv4 사용
- length: 패킷의 총 길이
- source IP address, destination IP address: 메시지를 생성해서 보내는 사람의 IP 주소, 받는 사람의 IP 주소
- time to live: 처음에 값을 주고 하나의 라우터를 지날 때마다 -1, 0이 되면 해당 패킷 사라짐
- upper layer: TCP인지 UDP인지(상위 레이어의 정보)
- data 부분에는 TCP 혹은 UDP 세그먼트가 들어감

IP 헤더 - 20바이트, TCP 헤더 - 20바이트 → 총 40바이트의 오버헤드 발생

### IPv4 Addressing

NIC(Network Interface)를 지칭하는 주소

32비트 주소체계, 계층화

네트워크 아이디(prefix, 서브넷 아이디)와 호스트 아이디로 나뉨

Subnet Mask: 어디까지가 네트워크 ID인지, 어디까지가 Host ID인지 나타냄

ex) 255.255.255.0에서 앞의 3개가 네트워크 아이디, 뒤의 1개가 호스트

### Subnets

network id = prefix = IP address = subnet

같은 subnet ID(prefix)를 가진 디바이스의 집합

같은 서브넷에서는 라우터를 거치지 않고 직접적으로 접근이 가능

라우터는 여러 개의 서브넷에 속함